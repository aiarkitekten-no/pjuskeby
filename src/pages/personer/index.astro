---
/* Pjuskeby Guardrails:
   - Ingen placeholders. Ingen ubrukte exports.
   - Følg koblinger.json for datakilder og relasjoner.
   - All skriving til DB/FS logges i donetoday.json.
   - Ved AI-generering: aldri publiser direkte; legg i drafts/.
   - Ved valideringsfeil: returner 422, ikke "tøm felt".
*/

import BaseLayout from '../../layouts/BaseLayout.astro';
import { readFile } from 'fs/promises';
import { join } from 'path';

const peopleData = JSON.parse(
  await readFile(join(process.cwd(), 'content/data/people.normalized.json'), 'utf-8')
);
---

<BaseLayout title="People" description="Meet the colorful residents of Pjuskeby">
  <h1 style="font-size: 2.5rem; margin-bottom: 2rem;">People in Pjuskeby</h1>
  
  <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem;">
    {peopleData.map((person: any) => (
      <a href={`/personer/${person.slug}`} style="text-decoration: none; color: inherit;">
        <article style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); transition: transform 0.2s; cursor: pointer;">
          <h2 style="color: #3b82f6; margin-bottom: 0.5rem;">{person.name}</h2>
          <p style="color: #64748b; font-size: 0.9rem; margin-bottom: 0.5rem;">
            {person.age} years old • {person.occupation}
          </p>
          {person.bio && (
            <p style="color: #475569; font-size: 0.9rem; line-height: 1.5;">
              {person.bio.slice(0, 100)}{person.bio.length > 100 ? '...' : ''}
            </p>
          )}
        </article>
      </a>
    ))}
  </div>
</BaseLayout>

<style>
  article:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  }
</style>
